class vez{constructor(t){this.consts=t(7),this.utils=t(8),this.three=t(4),this.colors=t(21),this.uiFunctions=t(133),console.json=(t=>console.log(JSON.stringify(t,void 0,2))),this.menu={features:[],items:new Map,activeMenu:0,activeLine:0,top:280,left:20,lineWidth:320,show:!0},this.settings={delta:1},this.enum={speed:1,ydir:2,xdir:3,shoot:5,scope:6,jump:7,crouch:8,reload:9,weapon:10},this.keys={Numpad5:101,Numpad0:96,Numpad8:104,Numpad2:98,Numpad5b:12,Numpad0b:45,ArrowRight:39,ArrowLeft:37,ArrowUp:38,ArrowDown:40},this.onload()}onload(){this.consts.playerHeight=11,console.json(this.consts),this.menu.items.set("♿ vez",[this.newFeature("Self",[]),this.newFeature("Weapon",[]),this.newFeature("Visual",[]),this.newFeature("Settings",[])]).set("Self",[this.newFeature("AutoBhop",["Off","Auto Jump","Key Jump","Auto Slide","Key Slide"])]).set("Weapon",[this.newFeature("AutoAim",["Off","TriggerBot","Quickscoper","Assist","Aim Bot","Silent Aim"]),this.newFeature("AutoReload",["Off","On"])]).set("Visual",[this.newFeature("EspMode",["Off","2d","Names","All"]),this.newFeature("Tracers",["Off","On"])]).set("Settings",[this.newFeature("Reset",[],this.resetSettings)])}onTick(t,e,i){if(!defined(e.controls.keys))return;let s=e.controls;this.world=e,this.me=t,defined(this.init)||(this.init=!0,console.dir(t),console.dir(e),console.dir(this.consts),this.consts.serverConfig[23].def=!0);for(let n=0,o=this.menu.features.length;n<o;n++){const o=this.menu.features[n];switch(o.name){case"AutoAim":this.autoAim(o.container[o.value],i);break;case"AutoReload":if(o.value){const i=t.ammos[t.weaponIndex];0===i&&(e.players.reload(t),i&&e.players.endReload(t.weapon))}break;case"AutoBhop":o.value&&(i[this.enum.jump]=1*((s.keys[s.jumpKey]||1===o.value||3===o.value)&&!t.didJump),o.value>2&&(i[this.enum.crouch]=1*(t.yVel<-.04&&t.canSlide)))}}t.lastInput=i}onRender(t,e,i,s,n,o,a){if(!defined(a.controls.keys))return;this.renderer=s;const r="30px Sans-serif";let c=main.innerWidth,h=main.innerHeight,l=e.width/n,u=e.height/n,p=s.camera.getWorldPosition(),m=a.controls,w=a.players.list.filter(t=>t.active&&!t[isYou]);if(defined(m.target)&&null!==m.target){const t=Math.PI/2;m.object.rotation.y=m.target.yD,m[pchObjc].rotation.x=m.target.xD,m[pchObjc].rotation.x=Math.max(-t,Math.min(t,m[pchObjc].rotation.x)),m.yDr=m[pchObjc].rotation.x%Math.PI,m.xDr=m.object.rotation.y%Math.PI}else m.target=null;let d=(t,e)=>{let i=e.clone();return i.project(t),i.x=(i.x+1)/2,i.y=(1-i.y)/2,i.x*=l,i.y*=u,i},y=(t,e,i)=>{t.translate(~~e,~~i)},f=(t,e,s,n,o)=>{i.save(),y(i,n,o),i.fillStyle=s,i.strokeStyle="rgba(0, 0, 0, 0.5)",i.font=e,i.lineWidth=1,i.strokeText(t,0,0),i.fillText(t,0,0),i.restore()},g=(t,e,s,n,o,a,r,c)=>{i.save(),y(i,t,e),i.beginPath(),c?i.fillStyle=r:i.strokeStyle=r,i.rect(s,n,o,a),c?i.fill():i.stroke(),i.closePath(),i.restore()},k=t=>{for(let e=0;e<t.length;e++)t[e]=~~i.measureText(t[e]).width;return t},x=t=>{var e="0123456789ABCDEF";return String(e.substr(t>>4&15,1))+e.substr(15&t,1)},v=(t,e,i,s=255)=>"#".concat(x(t),x(e),x(i),x(s)),b=(t,e,i,s,n,o,a,r,c=!0)=>{let h=[255,255,255,255],l=[0,0,0,120],u=20,p="px sans-serif";a&&(h[0]=0,h[1]=0,h[2]=0,l[0]=231,l[1]=231,l[2]=231,c&&(u=21)),r&&(l[0]=103,l[1]=1,l[2]=205,l[3]=255,c&&(u=20),p="px GameFont",o=e/2-k([t.name])),g(n,s,0,0,e,2*i,v(l[0],l[1],l[2],l[3]),!0),f(t.name,u+p,v(h[0],h[1],h[2]),o,s+i+i/2),f(t.valueStr,u+p,"On"===t.valueStr?"#B2F252":"Off"===t.valueStr?"#FF4444":a?"#333333":"#999EA5",e-1.5*o-k([t.valueStr]),s+i+i/2)},F=t=>{const e=this.menu.items.get(t);this.menu.activeLine>e.length-1&&(this.menu.activeLine=0),b({name:t,valueStr:""},this.menu.lineWidth,22,this.menu.top+18,this.menu.left,this.menu.left+5,!1,!0);for(var i=0;i<e.length;i++)i!=this.menu.activeLine&&b(e[i][0],this.menu.lineWidth,19,this.menu.top+60+36*i,this.menu.left,this.menu.left+9,!1,!1),b(e[this.menu.activeLine][0],this.menu.lineWidth,19,this.menu.top+60+36*this.menu.activeLine,this.menu.left,this.menu.left+9,!0,!1);if(m.keys[this.keys.Numpad5]||m.keys[this.keys.Numpad5b]||m.keys[this.keys.ArrowRight]){m.keys[this.keys.Numpad5]=m.keys[this.keys.ArrowRight]=m.keys[this.keys.Numpad5b]=0,main.SOUND.play("tick_0",.1);const t=e[this.menu.activeLine][0];t&&(t.container.length?this.onUpdated(t):"function"==typeof t.myFunction?t.myFunction():this.menu.activeMenu=this.menu.activeLine+1)}else m.keys[this.keys.Numpad0]||m.keys[this.keys.Numpad0b]||m.keys[this.keys.ArrowLeft]?(m.keys[this.keys.Numpad0]=m.keys[this.keys.Numpad0b]=m.keys[this.keys.ArrowLeft]=0,main.SOUND.play("tick_0",.1),this.menu.activeMenu>0?this.menu.activeMenu=0:this.menu.show&&(this.menu.show=0)):m.keys[this.keys.Numpad8]||m.keys[this.keys.ArrowUp]?(m.keys[this.keys.Numpad8]=m.keys[this.keys.ArrowUp]=0,main.SOUND.play("tick_0",.1),0===this.menu.activeLine&&(this.menu.activeLine=e.length),this.menu.activeLine--):(m.keys[this.keys.Numpad2]||m.keys[this.keys.ArrowDown])&&(m.keys[this.keys.Numpad2]=m.keys[this.keys.ArrowDown]=0,main.SOUND.play("tick_0",.1),this.menu.activeLine++,this.menu.activeLine===e.length&&(this.menu.activeLine=0))};if("none"==main.menuHolder.style.display&&"none"==main.endUI.style.display){const e=this.getFeature("EspMode").value,n=this.getFeature("EspMode").container[e];if(e&&w.map((e,a,m)=>{if(defined(e[objInstances])){let a=this.get(e,"isFriendly"),m=e[objInstances].position,w=a?"#44AAFF":"#FF4444",y=m.clone().setY(m.y+(this.consts.playerHeight+(0<=e.hatIndex?this.consts.nameOffsetHat:0)+this.consts.nameOffset-e.crouchVal*this.consts.crouchDst)).clone(),f=Math.max(.3,1-p.distanceTo(y)/600);if("2d"!==n&&1<=20*f&&s.frustum.containsPoint(y)){i.save(),y.project(s.camera),y.x=(y.x+1)/2,y.y=(y.y+1)/2,i.translate(l*y.x,u*(1-y.y)),i.scale(f,f),i.fillStyle="rgba(0, 0, 0, 0.4)",i.fillRect(-60,-16,120,16),t.dynamicHP&&e.hpChase>e.health/e.maxHealth&&(i.fillStyle="#FFFFFF",i.fillRect(-60,-16,120*e.hpChase,16)),i.fillStyle=a?this.colors.teams[0]:this.colors.teams[1],i.fillRect(-60,-16,e.health/e.maxHealth*120,16);let n=Math.round(m.distanceTo(o)/10);Number.isNaN(n)&&(n=0),n+="mt",i.font=r;let c=i.measureText(n).width+10,h=e.name,p=e.clan?"["+e.clan+"]":null;i.font=r;let d=i.measureText(h).width+(p?5:0),g=e.level;i.font=r;g&&i.measureText(g).width;let k=c+d+(p?i.measureText(p).width:0);i.translate(0,-26),i.fillStyle=w,i.font=r,i.fillText(n,-k/2,0),i.fillStyle="white",i.font=r,i.globalAlpha=1,i.fillText(h,-k/2+c,0),i.globalAlpha=0<=this.consts.verClans.indexOf(e.clan)?1:.4,i.fillStyle=0<=this.consts.verClans.indexOf(e.clan)?this.colors.verified.clan:"white",p&&i.fillText(p,-k/2+c+d,0),i.restore()}if(s.frustum.containsPoint(m)){let t=d(s.camera,m),o=d(s.camera,m.setY(m.y+this.consts.playerHeight-e.crouchVal*this.consts.crouchDst)),a=((t,e,i)=>{const s=~~(t.y-e.y);return[s,~~(s*i)]})(t,o,.6);"Names"!==n&&g(o.x-a[1]/2,o.y,0,0,a[1],a[0],w,!1);const r=this.getFeature("Tracers");r&&r.value&&((t,e,s,n,o,a)=>{i.save(),i.lineWidth=o+2,i.beginPath(),i.moveTo(t,e),i.lineTo(s,n),i.strokeStyle="rgba(0, 0, 0, 0.25)",i.stroke(),i.lineWidth=o,i.strokeStyle=a,i.stroke(),i.restore()})(c/2,h-(h-u),t.x,t.y,2.5,w)}for(let t=0;t<e[objInstances].children.length;t++){const i=e[objInstances].children[t];for(let t=0;t<i.children.length;t++){const e=i.children[t];if(e&&"Mesh"==e.type){const t=e.material;t.depthTest=!1,t.colorWrite=!0,t.transparent=!0,t.opacity=1}}}}}),this.menu.show)switch(this.menu.activeMenu){case 0:F("♿ vez");break;case 1:F("Self");break;case 2:F("Weapon");break;case 3:F("Visual");break;case 4:F("Settings")}else(m.keys[this.keys.Numpad0]||m.keys[this.keys.Numpad0b]||m.keys[this.keys.ArrowLeft])&&!this.menu.show&&(m.keys[this.keys.Numpad0]=m.keys[this.keys.Numpad0b]=m.keys[this.keys.ArrowLeft]=0,main.SOUND.play("tick_0",.1),this.menu.show=!0)}}resetSettings(){main.confirm("Are you sure you want to reset all your vez settings? This will also refresh the page")&&(Object.keys(main.localStorage).filter(t=>t.includes("utilities_")).forEach(t=>main.localStorage.removeItem(t)),main.location.reload())}newFeature(t,e,i=null){let s=[];const n=((...t)=>(...e)=>t.reduce((t,i,s)=>(t[i]=e[s],t),{}))("name","value","valueStr","container","myFunction"),o=parseInt(main.localStorage.getItem("utilities_"+t)||0),a=n(t,o,e.length?e[o]:"",e,i);return(e.length||i)&&this.menu.features.push(a),s.push(a),s}getFeature(t){for(const e of this.menu.features)if(e.name.toLowerCase()===t.toLowerCase())return e;return null}onUpdated(t){t.container.length&&(t.value+=1,t.value>t.container.length-1&&(t.value=0),t.valueStr=t.container[t.value],main.saveVal("utilities_"+t.name,t.value)),2===t.container.length&&"Off"===t.container[0]&&"On"===t.container[1]&&console.log(t.name," is now ",t.valueStr)}get(t,e){if(defined(t)&&t&&t.active)switch(e){case"isYou":return t[isYou];case"objInstances":return t[objInstances];case"inView":return null==this.world[canSee](this.me,t.x,t.y-t.crouchVal*this.consts.crouchDst,t.z)||t[cnBSeen];case"isFriendly":return(this.me&&this.me.team?this.me.team:this.me.spectating?1:0)==t.team;case"recoilAnimY":return t[recoilAnimY]}return null}getTarget(){defined(this.me.distance)||(this.me.distance=1/0);for(const t of this.world.players.list.filter(t=>t.active&&!t[isYou]&&this.get(t,"inView")&&!this.get(t,"isFriendly")&&t.health>0))if(defined(t[objInstances])){const e=t[objInstances].position;if(this.renderer.frustum.containsPoint(e)){const i=e.distanceTo(this.me);if(i<=this.me.distance)return this.me.distance=i,t}}return this.me.distance=1/0,null}camLookAt(t){const e=this.world.controls;if(!defined(e)||null===t||t.x+t.y+t.z2==0)return void(e.target=null);this.consts.playerHeight,this.consts.cameraHeight,t.crouchVal,this.consts.crouchDst;let i=this.consts.playerHeight-this.consts.headScale/2-t.crouchVal*this.consts.crouchDst,s=this.getXDir(e.object.position.x,e.object.position.y,e.object.position.z,t.x,t.y+i,t.z),n=this.getDirection(e.object.position.z,e.object.position.x,t.z,t.x);const o=this.consts.camChaseDst;e.target={xD:s,yD:n,x:t.x+o*Math.sin(n)*Math.cos(s),y:t.y-o*Math.sin(s),z:t.z+o*Math.cos(n)*Math.cos(s)}}autoAim(t,e){const i=this.world.controls,s=(Math.PI,2*Math.PI);let n=i.object.rotation.y,o=i[pchObjc].rotation.x;const a=this.getTarget();a?(n=this.getDirection(i.object.position.z,i.object.position.x,a.z,a.x),o=this.getXDir(i.object.position.x,i.object.position.y,i.object.position.z,a.x,a.y+this.consts.playerHeight-this.consts.headScale/2-a.crouchVal*this.consts.crouchDst,a.z),o-=this.consts.recoilMlt*this.me[recoilAnimY],"Assist"==t&&1==i[mouseDownR]?(this.camLookAt(a),1===this.me.aimVal&&(e[this.enum.scope]=1)):"Aim Bot"==t?(this.me.aimVal<1&&this.me.aimVal>0&&this.camLookAt(a),0===this.me.aimVal&&(e[this.enum.xdir]=+(o%s).toFixed(3),e[this.enum.ydir]=+(n%s).toFixed(3),e[this.enum.scope]=1)):"TriggerBot"==t?(1===this.me.aimVal&&i[mouseDownR],0===this.me.aimVal&&(e[this.enum.shoot]=1,this.camLookAt(a),e[this.enum.xdir]=+(o%s).toFixed(3),e[this.enum.ydir]=+(n%s).toFixed(3))):"Quickscoper"!=t&&"Silent Aim"!=t||(0===this.me.aimVal?("Quickscoper"==t&&this.camLookAt(a),e[this.enum.shoot]=1,e[this.enum.scope]=1,e[this.enum.xdir]=+(o%s).toFixed(3),e[this.enum.ydir]=+(n%s).toFixed(3)):(e[this.enum.scope]=1,i.target&&this.camLookAt(null))),this.me.didShoot&&(this.me.weapon.nAuto&&(e[this.enum.shoot]=0),e[this.enum.xdir]=+(o%s).toFixed(3),e[this.enum.ydir]=+(n%s).toFixed(3))):(i.target&&this.camLookAt(null),e[this.enum.shoot]=i[mouseDownL],e[this.enum.scope]=i[mouseDownR])}getDistance3D(t,e,i,s,n,o){var a=t-s,r=e-n,c=i-o;return Math.sqrt(a*a+r*r+c*c)}getDistance(t,e){return this.getDistance3D(t.x,t.y,t.z,e.x,e.y,e.z)}getDirection(t,e,i,s){return Math.atan2(e-s,t-i)}getXDir(t,e,i,s,n,o){var a=Math.abs(e-n),r=this.getDistance3D(t,e,i,s,n,o);return Math.asin(a/r)*(e>n?-1:1)}getAngleDist(t,e){return Math.atan2(Math.sin(e-t),Math.cos(t-e))}}function cripple_window(t){if(!t)return;let e=new Map(Object.entries({functions_to_hide:new WeakMap,strings_to_hide:[],hidden_globals:[],init:!1}));var i,s,n;t.top["ttap#4547"]?e=t.top["ttap#4547"]:(i=t.top,s="ttap#4547",n=e,e.get("hidden_globals").push(s),Object.defineProperty(i,s,{enumberable:!1,configurable:!1,writable:!0,value:n}));const o=t.Function.prototype.toString;let a=new Proxy(o,{apply:function(t,i,s){try{var n=Function.prototype.apply.apply(t,[i,s])}catch(t){throw t.stack=t.stack.replace(/\n.*Object\.apply \(<.*/,""),t}let o=e.get("functions_to_hide").get(i);if(o)return Function.prototype.apply.apply(t,[o,s]);for(var a=0;a<e.get("strings_to_hide").length;a++)n=n.replace(e.get("strings_to_hide")[a].from,e.get("strings_to_hide")[a].to);return n}});t.Function.prototype.toString=a;let r=function(t,i){e.get("functions_to_hide").set(i,t)},c=function(t,i){e.get("strings_to_hide").push({from:new RegExp(i.replace(/([\[|\]|\(|\)|\*|\\|\.|\+])/g,"\\$1"),"g"),to:t})};const h=t.Object.getOwnPropertyDescriptors;let l=new Proxy(h,{apply:function(t,i,s){try{var n=Function.prototype.apply.apply(t,[i,s])}catch(t){throw t.stack=t.stack.replace(/\n.*Object\.apply \(<.*/,""),t}for(var o=0;o<e.get("hidden_globals").length;o++)delete n[e.get("hidden_globals")[o]];return n}});t.Object.getOwnPropertyDescriptors=l;const u=t.CanvasRenderingContext2D.prototype.clearRect;let p=new Proxy(u,{apply:function(t,e,i){try{var s=Function.prototype.apply.apply(t,[e,i])}catch(t){throw t.stack=t.stack.replace(/\n.*Object\.apply \(<.*/,""),t}return function(t){if(t){const e=t.canvas,i=arguments.callee.caller.caller.arguments,s=i.callee,n=i[0],o=i[1],a=i[2],r=i[3];i[4],void 0!==window.vez&&window.vez.onRender(s,e,t,a,n,r,o)}}(e),s}});t.CanvasRenderingContext2D.prototype.clearRect=p;const m=t.open;let w=new Proxy(m,{apply:function(t,e,i){try{Function.prototype.apply.apply(t,[e,i])}catch(t){throw t.stack=t.stack.replace(/\n.*Object\.apply \(<.*/,""),t}return null}});t.open=w,e.get("exports")||e.set("exports",t=>{window.main=t(22),window.console=main.console,window.defined=(t=>void 0!==t),window.vez=new vez(t)}),e.get("procInputs")||e.set("procInputs",function(t,e,i){window.vez.onTick(i,e,t)});const d={apply:function(t,e,i){try{var s=Function.prototype.apply.apply(t,[e,i])}catch(t){throw t.stack=t.stack.replace(/\n.*Object\.apply \(<.*/,""),t}if(2==i.length&&i[1].length>parseInt("1337 ttap#4547")){let n=i[1];window.canSee=n.match(/,this\['(\w+)'\]=function\(\w+,\w+,\w+,\w+,\w+\){if\(!\w+\)return!\w+;/)[1],window.isYou=n.match(/,this\['\w+'\]=!\w+,this\['\w+'\]=!\w+,this\['(\w+)'\]=\w+,this\['\w+'\]\['length'\]=\w+,this\[/)[1],window.cnBSeen=n.match(/this\['recon']=!0x1,this\['(\w+)']=!0x1/)[1],window.objInstances=n.match(/\[\w+\]\['\w+'\]=!\w+,this\['\w+'\]\[\w+\]\['\w+'\]&&\(this\['\w+'\]\[\w+\]\['(\w+)'\]\['\w+'\]=!\w+/)[1],window.recoilAnimY=n.match(/\w*1,this\['\w+'\]=\w*0,this\['\w+'\]=\w*0,this\['\w+'\]=\w*1,this\['\w+'\]=\w*1,this\['\w+'\]=\w*0,this\['\w+'\]=\w*0,this\['(\w+)'\]=\w*0,this\['\w+'\]=\w*0,this\['\w+'\]=\w*0,this\['\w+'\]=\w*0,/)[1],window.pchObjc=n.match(/\(\w+,\w+,\w+\),this\['(\w+)'\]=new \w+\['\w+'\]\(\)/)[1],window.mouseDownL=n.match(/this\['\w+'\]=function\(\){this\['(\w+)'\]=\w*0,this\['(\w+)'\]=\w*0,this\['\w+'\]={}/)[1],window.mouseDownR=n.match(/this\['\w+'\]=function\(\){this\['(\w+)'\]=\w*0,this\['(\w+)'\]=\w*0,this\['\w+'\]={}/)[2];const o=n.match(/(\['__CANCEL__']=.*?\(\w+,\w+,(\w+)\){)let/),a=o[1].concat("window.top['","ttap#4547","'].get('exports')(",o[2],");let");n=n.replace(o[0],a),c(o[0],a);const h=n.match(/(this\['\w+']=function\((\w+,\w+,)\w+,\w+\){)(this)/),l=h[1].concat("window.top['","ttap#4547","'].get('procInputs')(",h[2],h[3],");",h[3]);n=n.replace(h[0],l),c(h[0],l),n=(n=(n=(n=(n=(n=(n=n.replace(/(if\('none'==menuHolder\['style']\['display']&&'none'==endUI\['style']\['display'])\)/,"$1 && !1)")).replace(/'use strict';/,"")).replace(/(\(((\w+))=this\['map']\['manager']\['objects']\[(\w+)]\))(.+?)\)/,"$1.penetrable&&$2.active)")).replace(/\w+\['weapon'\]&&\w+\['weapon'\]\['trail'\]/g,"true")).replace(/#9eeb56/g,"#44AAFF")).replace(/(Howler\['orientation'](.+?)\)\),)/,"")).replace(/,'zoom':.+?(?=,)/g,",'zoom':1");const u=i[1];i[1]=n;let p=Function.prototype.apply.apply(t,[e,i]);return i[1]=u,r(s,p),p}return s}},y=t.Function;let f=new Proxy(y,d);t.Function=f,r(m,w),r(u,p),r(h,l),r(o,a),r(y,f)}cripple_window(window.parent);
